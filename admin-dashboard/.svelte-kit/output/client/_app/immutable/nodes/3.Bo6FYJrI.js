import{S as be,i as De,s as ye,n as ie,d as f,a as L,b as z,c as l,e as I,f as g,g as V,h as D,j as T,k as p,t as y,l as x,o as Ee,m as pe,p as $,q as _e}from"../chunks/CU9EupLQ.js";import{e as ee,A as Ie}from"../chunks/Cw8VPk3b.js";import"../chunks/IHki7fMi.js";function ve(o,e,s){const t=o.slice();return t[4]=e[s],t}function fe(o,e,s){const t=o.slice();return t[7]=e[s],t}function ue(o){let e,s;return{c(){e=p("div"),s=y(o[2]),this.h()},l(t){e=g(t,"DIV",{class:!0});var a=V(e);s=D(a,o[2]),a.forEach(f),this.h()},h(){I(e,"class","p-3 rounded bg-red-900/40 border border-red-700 text-sm")},m(t,a){z(t,e,a),l(e,s)},p(t,a){a&4&&L(s,t[2])},d(t){t&&f(e)}}}function he(o){let e,s,t,a="Recent Events",c,r,v,E,i,d="Cost Summary",h,n,u,m,q=o[1].cost_summary.total_cost_usd+"",A,H,P,B,C=o[1].cost_summary.total_tokens+"",k,U,j,te,K=o[1].cost_summary.total_requests+"",Q,W,N,M,ne="Recent Errors",se,F,G=ee(o[1].recent_events),S=[];for(let _=0;_<G.length;_+=1)S[_]=me(fe(o,G,_));function ce(_,w){return _[1].recent_errors.length===0?ke:Ve}let X=ce(o),R=X(o);return{c(){e=p("div"),s=p("div"),t=p("div"),t.textContent=a,c=x(),r=p("div");for(let _=0;_<S.length;_+=1)S[_].c();v=x(),E=p("div"),i=p("div"),i.textContent=d,h=x(),n=p("div"),u=p("div"),m=y("Total cost (USD): "),A=y(q),H=x(),P=p("div"),B=y("Total tokens: "),k=y(C),U=x(),j=p("div"),te=y("Total requests: "),Q=y(K),W=x(),N=p("div"),M=p("div"),M.textContent=ne,se=x(),F=p("div"),R.c(),this.h()},l(_){e=g(_,"DIV",{class:!0});var w=V(e);s=g(w,"DIV",{class:!0});var b=V(s);t=g(b,"DIV",{class:!0,"data-svelte-h":!0}),$(t)!=="svelte-1yjenro"&&(t.textContent=a),c=T(b),r=g(b,"DIV",{class:!0});var O=V(r);for(let oe=0;oe<S.length;oe+=1)S[oe].l(O);O.forEach(f),b.forEach(f),v=T(w),E=g(w,"DIV",{class:!0});var Y=V(E);i=g(Y,"DIV",{class:!0,"data-svelte-h":!0}),$(i)!=="svelte-1ix72bz"&&(i.textContent=d),h=T(Y),n=g(Y,"DIV",{class:!0});var J=V(n);u=g(J,"DIV",{});var le=V(u);m=D(le,"Total cost (USD): "),A=D(le,q),le.forEach(f),H=T(J),P=g(J,"DIV",{});var ae=V(P);B=D(ae,"Total tokens: "),k=D(ae,C),ae.forEach(f),U=T(J),j=g(J,"DIV",{});var re=V(j);te=D(re,"Total requests: "),Q=D(re,K),re.forEach(f),J.forEach(f),Y.forEach(f),w.forEach(f),W=T(_),N=g(_,"DIV",{class:!0});var Z=V(N);M=g(Z,"DIV",{class:!0,"data-svelte-h":!0}),$(M)!=="svelte-or361a"&&(M.textContent=ne),se=T(Z),F=g(Z,"DIV",{class:!0});var de=V(F);R.l(de),de.forEach(f),Z.forEach(f),this.h()},h(){I(t,"class","text-sm font-semibold mb-2"),I(r,"class","max-h-80 overflow-auto text-xs"),I(s,"class","lg:col-span-2 rounded-lg border border-gray-700 bg-gray-900/60 p-3"),I(i,"class","text-sm font-semibold mb-2"),I(n,"class","text-xs"),I(E,"class","rounded-lg border border-gray-700 bg-gray-900/60 p-3"),I(e,"class","grid grid-cols-1 lg:grid-cols-3 gap-4"),I(M,"class","text-sm font-semibold mb-2"),I(F,"class","text-xs"),I(N,"class","mt-4 rounded-lg border border-gray-700 bg-gray-900/60 p-3")},m(_,w){z(_,e,w),l(e,s),l(s,t),l(s,c),l(s,r);for(let b=0;b<S.length;b+=1)S[b]&&S[b].m(r,null);l(e,v),l(e,E),l(E,i),l(E,h),l(E,n),l(n,u),l(u,m),l(u,A),l(n,H),l(n,P),l(P,B),l(P,k),l(n,U),l(n,j),l(j,te),l(j,Q),z(_,W,w),z(_,N,w),l(N,M),l(N,se),l(N,F),R.m(F,null)},p(_,w){if(w&2){G=ee(_[1].recent_events);let b;for(b=0;b<G.length;b+=1){const O=fe(_,G,b);S[b]?S[b].p(O,w):(S[b]=me(O),S[b].c(),S[b].m(r,null))}for(;b<S.length;b+=1)S[b].d(1);S.length=G.length}w&2&&q!==(q=_[1].cost_summary.total_cost_usd+"")&&L(A,q),w&2&&C!==(C=_[1].cost_summary.total_tokens+"")&&L(k,C),w&2&&K!==(K=_[1].cost_summary.total_requests+"")&&L(Q,K),X===(X=ce(_))&&R?R.p(_,w):(R.d(1),R=X(_),R&&(R.c(),R.m(F,null)))},d(_){_&&(f(e),f(W),f(N)),pe(S,_),R.d()}}}function me(o){let e,s,t=new Date(o[7].timestamp).toLocaleString()+"",a,c,r=o[7].event_type+"",v,E,i=o[7].tool_name+"",d,h,n,u,m=String(o[7].success)+"",q,A,H=o[7].response_time_ms+"",P,B;return{c(){e=p("div"),s=p("div"),a=y(t),c=y(" · "),v=y(r),E=y(" · "),d=y(i),h=x(),n=p("div"),u=y("success: "),q=y(m),A=y(" · rt(ms): "),P=y(H),B=x(),this.h()},l(C){e=g(C,"DIV",{class:!0});var k=V(e);s=g(k,"DIV",{class:!0});var U=V(s);a=D(U,t),c=D(U," · "),v=D(U,r),E=D(U," · "),d=D(U,i),U.forEach(f),h=T(k),n=g(k,"DIV",{});var j=V(n);u=D(j,"success: "),q=D(j,m),A=D(j," · rt(ms): "),P=D(j,H),j.forEach(f),B=T(k),k.forEach(f),this.h()},h(){I(s,"class","text-gray-400"),I(e,"class","py-1 border-b border-gray-800")},m(C,k){z(C,e,k),l(e,s),l(s,a),l(s,c),l(s,v),l(s,E),l(s,d),l(e,h),l(e,n),l(n,u),l(n,q),l(n,A),l(n,P),l(e,B)},p(C,k){k&2&&t!==(t=new Date(C[7].timestamp).toLocaleString()+"")&&L(a,t),k&2&&r!==(r=C[7].event_type+"")&&L(v,r),k&2&&i!==(i=C[7].tool_name+"")&&L(d,i),k&2&&m!==(m=String(C[7].success)+"")&&L(q,m),k&2&&H!==(H=C[7].response_time_ms+"")&&L(P,H)},d(C){C&&f(e)}}}function Ve(o){let e,s=ee(o[1].recent_errors),t=[];for(let a=0;a<s.length;a+=1)t[a]=ge(ve(o,s,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=_e()},l(a){for(let c=0;c<t.length;c+=1)t[c].l(a);e=_e()},m(a,c){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(a,c);z(a,e,c)},p(a,c){if(c&2){s=ee(a[1].recent_errors);let r;for(r=0;r<s.length;r+=1){const v=ve(a,s,r);t[r]?t[r].p(v,c):(t[r]=ge(v),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},d(a){a&&f(e),pe(t,a)}}}function ke(o){let e,s="No errors for this session.";return{c(){e=p("div"),e.textContent=s,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-q79q8"&&(e.textContent=s),this.h()},h(){I(e,"class","text-gray-400")},m(t,a){z(t,e,a)},p:ie,d(t){t&&f(e)}}}function ge(o){let e,s,t=new Date(o[4].timestamp).toLocaleString()+"",a,c,r=o[4].error_type+"",v,E,i,d=o[4].error_message+"",h,n;return{c(){e=p("div"),s=p("div"),a=y(t),c=y(" · "),v=y(r),E=x(),i=p("div"),h=y(d),n=x(),this.h()},l(u){e=g(u,"DIV",{class:!0});var m=V(e);s=g(m,"DIV",{class:!0});var q=V(s);a=D(q,t),c=D(q," · "),v=D(q,r),q.forEach(f),E=T(m),i=g(m,"DIV",{class:!0});var A=V(i);h=D(A,d),A.forEach(f),n=T(m),m.forEach(f),this.h()},h(){I(s,"class","text-gray-400"),I(i,"class","whitespace-pre-wrap"),I(e,"class","py-1 border-b border-gray-800")},m(u,m){z(u,e,m),l(e,s),l(s,a),l(s,c),l(s,v),l(e,E),l(e,i),l(i,h),l(e,n)},p(u,m){m&2&&t!==(t=new Date(u[4].timestamp).toLocaleString()+"")&&L(a,t),m&2&&r!==(r=u[4].error_type+"")&&L(v,r),m&2&&d!==(d=u[4].error_message+"")&&L(h,d)},d(u){u&&f(e)}}}function Ce(o){let e,s,t,a,c=o[0].session_id+"",r,v,E,i=o[2]&&ue(o),d=o[1]&&he(o);return{c(){e=p("div"),s=p("div"),t=p("h1"),a=y("Session: "),r=y(c),v=x(),i&&i.c(),E=x(),d&&d.c(),this.h()},l(h){e=g(h,"DIV",{class:!0});var n=V(e);s=g(n,"DIV",{class:!0});var u=V(s);t=g(u,"H1",{class:!0});var m=V(t);a=D(m,"Session: "),r=D(m,c),m.forEach(f),v=T(u),i&&i.l(u),E=T(u),d&&d.l(u),u.forEach(f),n.forEach(f),this.h()},h(){I(t,"class","text-2xl font-semibold mb-4"),I(s,"class","mx-auto max-w-7xl p-6"),I(e,"class","min-h-screen bg-gray-900 text-gray-100")},m(h,n){z(h,e,n),l(e,s),l(s,t),l(t,a),l(t,r),l(s,v),i&&i.m(s,null),l(s,E),d&&d.m(s,null)},p(h,[n]){n&1&&c!==(c=h[0].session_id+"")&&L(r,c),h[2]?i?i.p(h,n):(i=ue(h),i.c(),i.m(s,E)):i&&(i.d(1),i=null),h[1]?d?d.p(h,n):(d=he(h),d.c(),d.m(s,null)):d&&(d.d(1),d=null)},i:ie,o:ie,d(h){h&&f(e),i&&i.d(),d&&d.d()}}}function Se(o,e,s){let{params:t}=e,a=null,c=null;async function r(){try{const v=await fetch(`${Ie}/analytics/sessions/${t.session_id}/details`,{credentials:"include"});if(!v.ok)throw new Error(`HTTP ${v.status}`);s(1,a=await v.json())}catch(v){s(2,c=v.message)}}return Ee(r),o.$$set=v=>{"params"in v&&s(0,t=v.params)},[t,a,c]}class xe extends be{constructor(e){super(),De(this,e,Se,Ce,ye,{params:0})}}export{xe as component};
