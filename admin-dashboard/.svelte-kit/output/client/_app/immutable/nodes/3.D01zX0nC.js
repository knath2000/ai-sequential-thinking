import{S as Et,i as Dt,s as It,n as ft,d as c,a as R,b as et,c as e,m as i,e as n,f as m,o as B,h as C,g as A,j as r,k as E,t as L,l as Tt,p as St,q as Vt}from"../chunks/CButxS-Z.js";import{A as kt,e as bt}from"../chunks/Cw8VPk3b.js";import"../chunks/IHki7fMi.js";import{p as wt}from"../chunks/Dz-3ECFQ.js";function yt(o,t,s){const l=o.slice();return l[6]=t[s],l}function At(o){let t,s,l,h="Summary",V,a,g,b,D="Created:",I,S=new Date(o[3].session.created_at).toLocaleString()+"",_,p,d,x,P="Requests:",z,w=o[3].session.total_requests+"",H,M,q,y,v="Errors:",Q,Y=o[3].session.total_errors+"",F,W,j,G,_t="Proc (ms):",ct,tt=o[3].session.total_processing_time_ms+"",st,dt,U,J,pt="Recent Events",ht,X,O,K,mt='<tr><th class="px-3 py-2">Time</th> <th class="px-3 py-2">Type</th> <th class="px-3 py-2">Tool</th> <th class="px-3 py-2">Resp (ms)</th> <th class="px-3 py-2">Success</th></tr>',vt,Z,$=bt(o[3].events),T=[];for(let u=0;u<$.length;u+=1)T[u]=Ct(yt(o,$,u));return{c(){t=r("div"),s=r("div"),l=r("div"),l.textContent=h,V=E(),a=r("div"),g=r("div"),b=r("span"),b.textContent=D,I=E(),_=L(S),p=E(),d=r("div"),x=r("span"),x.textContent=P,z=E(),H=L(w),M=E(),q=r("div"),y=r("span"),y.textContent=v,Q=E(),F=L(Y),W=E(),j=r("div"),G=r("span"),G.textContent=_t,ct=E(),st=L(tt),dt=E(),U=r("div"),J=r("div"),J.textContent=pt,ht=E(),X=r("div"),O=r("table"),K=r("thead"),K.innerHTML=mt,vt=E(),Z=r("tbody");for(let u=0;u<T.length;u+=1)T[u].c();this.h()},l(u){t=n(u,"DIV",{class:!0});var k=m(t);s=n(k,"DIV",{class:!0});var f=m(s);l=n(f,"DIV",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1fwci88"&&(l.textContent=h),V=C(f),a=n(f,"DIV",{class:!0});var N=m(a);g=n(N,"DIV",{});var lt=m(g);b=n(lt,"SPAN",{class:!0,"data-svelte-h":!0}),B(b)!=="svelte-1fx5idb"&&(b.textContent=D),I=C(lt),_=A(lt,S),lt.forEach(c),p=C(N),d=n(N,"DIV",{});var at=m(d);x=n(at,"SPAN",{class:!0,"data-svelte-h":!0}),B(x)!=="svelte-1tfyxfp"&&(x.textContent=P),z=C(at),H=A(at,w),at.forEach(c),M=C(N),q=n(N,"DIV",{});var nt=m(q);y=n(nt,"SPAN",{class:!0,"data-svelte-h":!0}),B(y)!=="svelte-r3faog"&&(y.textContent=v),Q=C(nt),F=A(nt,Y),nt.forEach(c),W=C(N),j=n(N,"DIV",{});var rt=m(j);G=n(rt,"SPAN",{class:!0,"data-svelte-h":!0}),B(G)!=="svelte-1mn0k9y"&&(G.textContent=_t),ct=C(rt),st=A(rt,tt),rt.forEach(c),N.forEach(c),f.forEach(c),dt=C(k),U=n(k,"DIV",{class:!0});var ot=m(U);J=n(ot,"DIV",{class:!0,"data-svelte-h":!0}),B(J)!=="svelte-1yjenro"&&(J.textContent=pt),ht=C(ot),X=n(ot,"DIV",{class:!0});var gt=m(X);O=n(gt,"TABLE",{class:!0});var it=m(O);K=n(it,"THEAD",{class:!0,"data-svelte-h":!0}),B(K)!=="svelte-1oxh9ca"&&(K.innerHTML=mt),vt=C(it),Z=n(it,"TBODY",{});var xt=m(Z);for(let ut=0;ut<T.length;ut+=1)T[ut].l(xt);xt.forEach(c),it.forEach(c),gt.forEach(c),ot.forEach(c),k.forEach(c),this.h()},h(){i(l,"class","text-sm font-semibold mb-2"),i(b,"class","text-gray-400"),i(x,"class","text-gray-400"),i(y,"class","text-gray-400"),i(G,"class","text-gray-400"),i(a,"class","text-xs space-y-1"),i(s,"class","lg:col-span-1 rounded border border-gray-700 p-3 bg-gray-900/60"),i(J,"class","text-sm font-semibold mb-2"),i(K,"class","bg-gray-800 text-gray-300"),i(O,"class","min-w-full text-left text-xs"),i(X,"class","overflow-auto"),i(U,"class","lg:col-span-2 rounded border border-gray-700 p-3 bg-gray-900/60"),i(t,"class","mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4")},m(u,k){et(u,t,k),e(t,s),e(s,l),e(s,V),e(s,a),e(a,g),e(g,b),e(g,I),e(g,_),e(a,p),e(a,d),e(d,x),e(d,z),e(d,H),e(a,M),e(a,q),e(q,y),e(q,Q),e(q,F),e(a,W),e(a,j),e(j,G),e(j,ct),e(j,st),e(t,dt),e(t,U),e(U,J),e(U,ht),e(U,X),e(X,O),e(O,K),e(O,vt),e(O,Z);for(let f=0;f<T.length;f+=1)T[f]&&T[f].m(Z,null)},p(u,k){if(k&8&&S!==(S=new Date(u[3].session.created_at).toLocaleString()+"")&&R(_,S),k&8&&w!==(w=u[3].session.total_requests+"")&&R(H,w),k&8&&Y!==(Y=u[3].session.total_errors+"")&&R(F,Y),k&8&&tt!==(tt=u[3].session.total_processing_time_ms+"")&&R(st,tt),k&8){$=bt(u[3].events);let f;for(f=0;f<$.length;f+=1){const N=yt(u,$,f);T[f]?T[f].p(N,k):(T[f]=Ct(N),T[f].c(),T[f].m(Z,null))}for(;f<T.length;f+=1)T[f].d(1);T.length=$.length}},d(u){u&&c(t),Vt(T,u)}}}function Lt(o){let t,s;return{c(){t=r("div"),s=L(o[2]),this.h()},l(l){t=n(l,"DIV",{class:!0});var h=m(t);s=A(h,o[2]),h.forEach(c),this.h()},h(){i(t,"class","mt-4 text-sm text-red-400")},m(l,h){et(l,t,h),e(t,s)},p(l,h){h&4&&R(s,l[2])},d(l){l&&c(t)}}}function Pt(o){let t,s="Loading…";return{c(){t=r("div"),t.textContent=s,this.h()},l(l){t=n(l,"DIV",{class:!0,"data-svelte-h":!0}),B(t)!=="svelte-1qhj9eb"&&(t.textContent=s),this.h()},h(){i(t,"class","mt-4 text-sm text-gray-400")},m(l,h){et(l,t,h)},p:ft,d(l){l&&c(t)}}}function Ct(o){let t,s,l=new Date(o[6].timestamp).toLocaleString()+"",h,V,a,g=o[6].event_type+"",b,D,I,S=o[6].tool_name+"",_,p,d,x=(o[6].response_time_ms??"-")+"",P,z,w,H=o[6].success?"Yes":"No",M,q;return{c(){t=r("tr"),s=r("td"),h=L(l),V=E(),a=r("td"),b=L(g),D=E(),I=r("td"),_=L(S),p=E(),d=r("td"),P=L(x),z=E(),w=r("td"),M=L(H),q=E(),this.h()},l(y){t=n(y,"TR",{class:!0});var v=m(t);s=n(v,"TD",{class:!0});var Q=m(s);h=A(Q,l),Q.forEach(c),V=C(v),a=n(v,"TD",{class:!0});var Y=m(a);b=A(Y,g),Y.forEach(c),D=C(v),I=n(v,"TD",{class:!0});var F=m(I);_=A(F,S),F.forEach(c),p=C(v),d=n(v,"TD",{class:!0});var W=m(d);P=A(W,x),W.forEach(c),z=C(v),w=n(v,"TD",{class:!0});var j=m(w);M=A(j,H),j.forEach(c),q=C(v),v.forEach(c),this.h()},h(){i(s,"class","px-3 py-2"),i(a,"class","px-3 py-2"),i(I,"class","px-3 py-2"),i(d,"class","px-3 py-2"),i(w,"class","px-3 py-2"),i(t,"class","border-t border-gray-800")},m(y,v){et(y,t,v),e(t,s),e(s,h),e(t,V),e(t,a),e(a,b),e(t,D),e(t,I),e(I,_),e(t,p),e(t,d),e(d,P),e(t,z),e(t,w),e(w,M),e(t,q)},p(y,v){v&8&&l!==(l=new Date(y[6].timestamp).toLocaleString()+"")&&R(h,l),v&8&&g!==(g=y[6].event_type+"")&&R(b,g),v&8&&S!==(S=y[6].tool_name+"")&&R(_,S),v&8&&x!==(x=(y[6].response_time_ms??"-")+"")&&R(P,x),v&8&&H!==(H=y[6].success?"Yes":"No")&&R(M,H)},d(y){y&&c(t)}}}function qt(o){let t,s,l,h="← Back",V,a,g,b,D;function I(p,d){return p[1]?Pt:p[2]?Lt:At}let S=I(o),_=S(o);return{c(){t=r("div"),s=r("div"),l=r("a"),l.textContent=h,V=E(),a=r("h1"),g=L("Session "),b=L(o[0]),D=E(),_.c(),this.h()},l(p){t=n(p,"DIV",{class:!0});var d=m(t);s=n(d,"DIV",{class:!0});var x=m(s);l=n(x,"A",{href:!0,class:!0,"data-svelte-h":!0}),B(l)!=="svelte-wvc3xi"&&(l.textContent=h),V=C(x),a=n(x,"H1",{class:!0});var P=m(a);g=A(P,"Session "),b=A(P,o[0]),P.forEach(c),D=C(x),_.l(x),x.forEach(c),d.forEach(c),this.h()},h(){i(l,"href","/dashboard"),i(l,"class","text-sm text-blue-400 hover:underline"),i(a,"class","text-2xl font-semibold mt-2"),i(s,"class","mx-auto max-w-6xl p-6"),i(t,"class","min-h-screen bg-gray-900 text-gray-100")},m(p,d){et(p,t,d),e(t,s),e(s,l),e(s,V),e(s,a),e(a,g),e(a,b),e(s,D),_.m(s,null)},p(p,[d]){d&1&&R(b,p[0]),S===(S=I(p))&&_?_.p(p,d):(_.d(1),_=S(p),_&&(_.c(),_.m(s,null)))},i:ft,o:ft,d(p){p&&c(t),_.d()}}}function Nt(o,t,s){let l;Tt(o,wt,D=>s(4,l=D));let h="",V=!0,a=null,g=null;async function b(){try{const D=l.params.id;s(0,h=D);const I=await fetch(`${kt}/analytics/sessions/${encodeURIComponent(D)}`,{credentials:"include"});if(!I.ok)throw new Error(`HTTP ${I.status}`);s(3,g=await I.json()),s(2,a=null)}catch(D){s(2,a=D.message)}finally{s(1,V=!1)}}return St(b),[h,V,a,g]}class Mt extends Et{constructor(t){super(),Dt(this,t,Nt,qt,It,{})}}export{Mt as component};
